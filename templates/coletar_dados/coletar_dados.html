<div id="conteudo" class="container">
  <h1>Coletar Dados</h1>

  <div class="card">
    
    <div class="card-body">
      <h4>Esta seção é responsável por coletar novos dados do Youtube</h4>
      <br>
      <!-- <h5>Status da API: <i id="status_conexao_api_youtube" class="fas fa-wifi api_waiting"></i> <button data-toggle="modal" data-target="#modal_api" id="btn_conectar_api_youtube" type="button" class="btn btn-secondary btn-sm">Conectar</button> </span></h5> -->
      <h5>Status da API: <i id="status_conexao_api_youtube" class="fas fa-wifi api_waiting"></i> <button  id="btn_conectar_api_youtube" type="button" class="btn btn-secondary btn-sm">Conectar</button> </span></h5>
      <br>
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Add Novo Canal</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Extrair Vídeos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="profile-tab" data-toggle="tab" href="#atualizar_dados" role="tab" aria-controls="profile" aria-selected="false">Atualizar Dados</a>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
          {% include "coletar_dados/novo_canal.html" %}
        </div>
        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
          {% include "coletar_dados/extrair_videos.html" %}
        </div>
        <div class="tab-pane fade" id="atualizar_dados" role="tabpanel" aria-labelledby="profile-tab">
          {% include "coletar_dados/atualizar_dados.html" %}
        </div>

  
      </div>
    </div>
  </div>

</div>


<script type="text/javascript">

btn_conectar_api_youtube.onclick = function(){

$.ajax({
    method: "POST",
    url:"/get_token_api",
    data: {}
}).done(function(data) {
  
  if (data=="Sucesso")
  {
    $("#status_conexao_api_youtube").toggleClass('api_waiting api_online');
  }
  else
  {
    $("#status_conexao_api_youtube").toggleClass('api_waiting api_offline'); 
  }

})
.fail(function() {
    $("#status_conexao_api_youtube").toggleClass('api_waiting api_offline');
    alert("Falha na conexão com o Youtube API");
})
.always(function() {
    
});

};
</script>